================================================================================
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
================================================================================

$Revision$ $Date$

                         =================================
                         Apache Tomcat 6.0 Patch Proposals
                         =================================


RELEASE SHOWSTOPPERS:


PATCHES ACCEPTED TO BACKPORT:
  [ start all new proposals below, under PATCHES PROPOSED. ]

PATCHES PROPOSED TO BACKPORT:
  [ New proposals should be added at the end of the list ]

*  Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=36155
   Port the fix from the JK Connector to the AJP and APR Connectors
   http://svn.apache.org/viewvc?rev=672454&view=rev
   +1: billbarker
   -1: remm: No, this gets called all the time, and we're trying to fix a small issue. The real
             solution would be to recycle the fields since as mentioned here it is the cause of 
             the problem (the "local" fields will often never change, but there's no real 
             guarantee overall - it mostly breaks down if there are multiple connectors, with AJP,
             and seems impossible to anticipate):
             https://issues.apache.org/bugzilla/show_bug.cgi?id=36155#c17

* Add in startup options, so that cluster can be started in TCP mode only, when using static membership
  Also document the multicast recovery options
  http://svn.apache.org/viewvc?rev=674125&view=rev
  +1: fhanik, markt, funkman
  -1: 

* Fix comet behavior
  Invoke READ when there is a body and make sure END is called if CometEvent.close is called during an invokation
  http://svn.apache.org/viewvc?rev=677473&view=rev
  +1: fhanik, funkman
   0: remm: no idea if it's better or worse (the fact that it's been closed is visible)
  -1: 

* Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45459
  Include possible cause in error message since excpetion isn't that clear
  http://svn.apache.org/viewvc?rev=680710&view=rev
  +1: markt
  -0: funkman ( Agree with Remy - just not as strongly (There is enough in the stacktrace that your fav search
       engine can tell you what is wrong fairly quickly)
  -1: remm (this error seems to be displayed by Class.newInstance() which should be ok to use; I am
            not ok with the idea of working around every error message from JDKs)

* Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45453
  Add required sync to race condition
  Based on a patch by Santtu Hyrkk
  http://svn.apache.org/viewvc?rev=680725&view=rev
  +1: markt, remm, funkman
  -1: 

* Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45511
  Revert fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=42565
  and implement alternative
  http://svn.apache.org/viewvc?rev=681735&view=rev (revert)
  http://svn.apache.org/viewvc/tomcat/trunk/java/org/apache/el/parser/ELParser.jjt?r1=681735&r2=681789 (new fix)
  Note: Auto-generated files will also need to be updated
  +1: markt, remm, funkman
  -1: 

* Fix issue where the first request for a deleted JSPs returns as if the JSP
  still exists.
  http://svn.apache.org/viewvc?view=rev&revision=683969
  +1: markt
   0: remm (looks risky, very minor problem)
  -1: 

* Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45591
  NPE on start-up failure in some cases. Based on a patch by Matt Passell
  http://svn.apache.org/viewvc?rev=683982&view=rev
  +1: markt, remm, funkman
  -1: 

* Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45585
  Tomcat failed to start if using $CATALINA_BASE but not JULI. Patch based on a
  suggestion by Ian Ward Comfort
  http://svn.apache.org/viewvc?rev=684001&view=rev
  +1: markt, remm, funkman
  -1: 

* JAASMemoryLoginModule didn't conform to JAASRealm contract. This prevented any
  user from being assigned a role.
  http://svn.apache.org/viewvc?rev=684081&view=rev
  +1: markt, remm, funkman
  -1: 

* Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45576
  Add support for DIGEST to the JAASRealm
  http://svn.apache.org/viewvc?rev=684234&view=rev
  +1: markt, funkman, remm (the two people using digest could be interested)
  -1: 

* Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=41407
  Add support for CLIENT-CERT to the JASSRealm. Builds on DIGEST patch above.
  http://svn.apache.org/viewvc?rev=684270&view=rev
  +1: markt, remm
  -1: 
   0: funkman -  I see the bug URL twice with no patch

 
* Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45528
  Test the SSL socket for cert/cipher compatibility before returning it
  http://svn.apache.org/viewvc?rev=684559&view=rev
  +1: markt
   0: remm: It does look like a hack indeed, but it detects the problem
  -1: billbarker The patch is horrible, since it drops connections for no good reason, simply to 
                 protect against a totally brain-dead miss-configurations.  If the check is moved into
                 the main except loop, then I can go for -0.

* Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45608
  Prevent race condition for allocate/deallocate in StandardWrapper
  http://svn.apache.org/viewvc?rev=685177&view=rev
  +1: markt
   0: remm: The only unsafe usage of this field is to implement the gimmick loop-wait hack,
            which to me means adding any sort of sync is not worth it.
  -1: 
