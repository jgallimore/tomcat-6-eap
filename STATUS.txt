================================================================================
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
================================================================================

$Id$

                         =================================
                         Apache Tomcat 6.0 Patch Proposals
                         =================================


RELEASE SHOWSTOPPERS:


PATCHES ACCEPTED TO BACKPORT:
  [ start all new proposals below, under PATCHES PROPOSED. ]

PATCHES PROPOSED TO BACKPORT:
  [ New proposals should be added at the end of the list ]


* Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55198
  Correctly escape XML output from tagx files.
  http://svn.apache.org/r1500065 (excluding tests) - original fix
  http://svn.apache.org/r1539176 (excluding tests) - required for following fix
  http://svn.apache.org/r1539177 (excluding tests) - fixes regression in original
  +1: markt, schultz, remm, jboynes
  -1:

* Fix issue with Manager app and other apps that use i18n in the UI when a
  request that specifies an Accept-Language of English ahead of French, Spanish
  or Japanese.
  Port all the other improvements to the StringManager from trunk as well
  http://people.apache.org/~markt/patches/2013-12-17-webapp-locale-tc6.patch
  +1: markt, remm, jboynes
  +1: kkolinko (a typo in changelog: s/associated/associate/)
  -1:

* Add support for limiting the size of chunk extensions when using chunked
  encoding.
  http://people.apache.org/~markt/patches/2013-12-17-chunk-extensions-tc6-v2.patch
  +1: markt, kkolinko, remm, jboynes
  -1:

* Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55749
  Improve the error message when SSLEngine is disabled in AprLifecycleListener
  and SSL is configured for an APR/native connector.
  http://people.apache.org/~markt/patches/2013-11-12-bug55749-tc6.patch
  +1: markt, kkolinko, remm
  -1:

* Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55759
  Update the Eclipse compiler to 4.3.1
  http://svn.apache.org/viewvc?view=revision&revision=1539953
  +1: markt
  +0: kkolinko: A Tomcat6-specific patch is needed. It needs update to jar
       exclude lists in TldConfig.java, TldLocationsCache.java, see r1476932.
  -1:

* Add missing J2EE 5 resources
  Note I am generating the patches using git so the patch shows whole new files
  being added. When actually making the commit, they will be copied from 7.0.x 
  and amended to retain history.
  http://people.apache.org/~markt/patches/2013-12-19-javaee-xml-tc6-v1.patch
  +1: markt, kkolinko, jboynes
  -1:

* Back-port some XML processing improvements (part 1)
  The patch could have been smaller but I opted to align some of the code with
  Tomcat 7 (which meant re-ordering methods in places) to make it easier to
  compare 6.0.x code with 7.0.x code.
  http://people.apache.org/~markt/patches/2013-12-20-xml-prep-part1-tc6-v2.patch
  +1: markt, remm, jboynes
  +1: kkolinko:
      I do not like that you change the values of validation flags when
      STRICT_SERVLET_COMPLIANCE is set. This was a feature required for
      Servlet 3.0, but I do not remember the same requirement for Servlet
      2.5.
      I expect that with this change the bug #351040 in Eclipse IDE will
      become visible with Tomcat 6, while it is currently observed with
      Tomcat 7 only. It is not our policy to provide workarounds for 3rd
      party bugs, so this is not a veto.
        https://bugs.eclipse.org/bugs/show_bug.cgi?id=351040
      The rest of the patch is OK.
      markt:
      Servlet 2.5, SRV.14.4.3 requires validation for a J2EE compliant
      implementation. The Eclipse bug is annoying but easy to workaround and
      only present when using STRICT_SERVLET_COMPLIANCE.
      kkolinko:
      Thank you for the chapter number. I am changing my vote to +1. It'd
      be better to mention the chapter number in the changelog.
  -1:

* Back-port some XML processing improvements (part 2)
  JspC passes configuration with ServletContext init params so a real
  implementation is required. This is essentially a back-port of
  http://svn.apache.org/r1552306
  http://people.apache.org/~markt/patches/2013-12-19-xml-prep-part2-tc6-v1.patch
  +1: markt, kkolinko, remm, jboynes
  -1:

* Back-port some XML processing improvements (part 3)
  Add the new descriptor package
  Note I am generating the patches using git so the patch shows whole new files
  being added. When actually making the commit, they will be copied from 7.0.x 
  and amended to retain history.
  http://people.apache.org/~markt/patches/2013-12-19-xml-prep-part3-tc6-v1.patch
  +1: markt, remm
  +1: kkolinko (Looks OK. I have not tested into what jar the new package
      goes and whether it requires an update to build.xml).
  +1: jboynes (Looks OK, have not verified if schema references work when the
      XSDs are still split between servlet/resources and jsp/resources).
  -1:

* Back-port some XML processing improvements (part 4)
  Add a unit test for the new descriptor
  Note I am generating the patches using git so the patch shows whole new files
  being added. When actually making the commit, they will be copied from 7.0.x 
  and amended to retain history.
  http://people.apache.org/~markt/patches/2013-12-19-xml-prep-part4-tc6-v1.patch
  +1: markt, remm
  +0: kkolinko:
      This requires JUnit4. Formally, "eclipse.classpath" file still uses
      JUnit 3 and if I understand correctly build.xml does not have JUnit
      on classpath, but uses whatever version is available with Ant, with
       <available classname="junit.framework.TestCase" property="junit.present" />

      A patch to introduce JUnit 4 may be to fix the Eclipse file and
      fix the availability check to look for a JUnit 4 class.
      (A more detailed solution may be based on r1408413, but that
      requires Ant >= 1.8.0).
  -1:

* Avoid possible NPE when a content type with no charset is specified
  (Followup to r1548971)
  http://svn.apache.org/r1552805
  +1: markt, kkolinko, remm, jboynes
  -1:

* Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55973
  Fix processing of XML schemas when validation is enabled in Jasper
  http://svn.apache.org/r1556377
  +1: kkolinko, jboynes
  -1:


PATCHES/ISSUES THAT ARE STALLED

