================================================================================
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
================================================================================

$Id$

                         =================================
                         Apache Tomcat 6.0 Patch Proposals
                         =================================


RELEASE SHOWSTOPPERS:


PATCHES ACCEPTED TO BACKPORT:
  [ start all new proposals below, under PATCHES PROPOSED. ]

PATCHES PROPOSED TO BACKPORT:
  [ New proposals should be added at the end of the list ]

* Backport UserDataHelper class (issue 52184)
  Provide greater control over the logging of errors triggered by invalid
  input data (i.e. data over which Tomcat has no control).

  Note: cookies logging (o.a.t.util.http.Cookies) does not need to be
  addressed in Tomcat 6, because all logging in that class here is done at
  debug level.

  http://people.apache.org/~kkolinko/patches/2013-03-24_tc6_52184_UserDataHelper.patch
  +1: kkolinko
  -1:

* For https://issues.apache.org/bugzilla/show_bug.cgi?id=52055
  Ensure that filters are recycled.
  Inspired by r1334790 (TC7), r565964 (TC6 Nio)
  I do not have evidence that this change matters, but it should not hurt.
  The nextRequest() method already recycles the filters. If it has been called,
  then lastActiveFilter is -1 and the new code will be NOOP.
  http://people.apache.org/~kkolinko/patches/2012-06-02_tc6_recycle.patch
  +1: kkolinko, schultz
  -1:

* Chunked encoding improvements
  http://people.apache.org/~markt/patches/2012-10-19-chunked-encoding-tc6.patch
  +1: markt, kkolinko, jfclere
  -1:

* Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54044
  Correct bug in timestamp cache used by org.apache.juli.OneLineFormatter
  that meant entries could be made with an earlier timestamp than the true timestamp.
  (The test was added to tomcat6-testing branch in r1408453)
  http://svn.apache.org/viewvc?view=revision&revision=1408459
  +1: kkolinko, markt
  -1:

* Improve method cache handling in SecurityUtil class.
  Add caching for Comet methods and simplify cache lookup code.
  It is backport of r728776 (BZ 46304) and r1429360
  http://people.apache.org/~kkolinko/patches/2013-01-05_tc6_46304_SecurityUtil.patch
  +1: kkolinko, schultz
  -1:

* Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54382
  Avoid NPE with an empty SSI directive
  http://svn.apache.org/viewvc?view=revision&revision=1430553
  (r1430550 in trunk)
  +1: kkolinko, markt
  -1:

* Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54456
  If the client aborts the request, make sure this is communicated to the
  application reading the request body.
  http://svn.apache.org/viewvc?rev=1443430&view=rev
  (r1443427 in trunk)
  +1: kkolinko, markt
  -1:

* Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54527
  Update file extension to MIME type mapping in web.xml. Aligh with current
  trunk.
  https://issues.apache.org/bugzilla/attachment.cgi?id=29962
  +1: markt, kkolinko, jfclere
  -1:

* Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54601
  Change catalina.sh to consistently use LOGGING_MANAGER variable to
  configure logging, instead of modifying JAVA_OPTS one.
  https://issues.apache.org/bugzilla/attachment.cgi?id=29985
  (backport of r1449406; r1449412 in tc7)
  +1: kkolinko
  -1:

* Add sample Apache Commons Daemon JSVC wrapper script bin/daemon.sh that
  can be used with /etc/init.d.
  This file is needed, as it has been removed from Commons Daemon and thus
  a reference to it in docs/setup.html became incorrect.
  This copy of daemon.sh differs from Tomcat trunk one in initialization of
  CLASSPATH setting, because tomcat-juli.jar has to be handled differently.
  http://people.apache.org/~kkolinko/patches/2013-03-26_tc6_daemonsh.patch
  +1: kkolinko, jfclere
  -1:

* Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54615
  Update to Eclipse JDT Compiler 4.2.2
  http://people.apache.org/~kkolinko/patches/2013-03-26_tc6_eclipse422.patch
  +1: kkolinko
  -1:

* Update the native component of the APR/native connector to 1.1.27 and
  make that version the recommended minimum version.
  http://svn.apache.org/r1445210
  +1: kkolinko
  -1:

PATCHES/ISSUES THAT ARE STALLED

* Backport JSP unloading patch (BZ48358).
  The patch has substantially changed since the original version.
  Original revisions are: 937787, 1028377, 1028389, 1028396, 1028861, 1028862, 1028863,
  1028935, 1028939, 1028940, 1028944, 1028950, 1030014, 1030037
  Combined TC 6 patch:
  http://people.apache.org/~rjung/patches/BZ48358-JSP_Unloading-TC6_20101118.patch
  +1: rjung
  -0: markt - http://markmail.org/thread/777be426ulcfmdd3 suggests there may be
              a memory leak in this code somewhere. I'd like to get to the
              bottom of that before porting this
      rjung:  I started a discussion about JSPs and memory on the dev list.
              The updated patch fixes a race condition.
              We can stall this item until we get some feedback about 7.0.5.
      markt - r1172614 needs to be included in this proposal. With that patch,
              my testing shows that the unloading works as designed
      kkolinko - r1428358 (r1428355) is needed - a fix for BZ 54260.
  -1:
