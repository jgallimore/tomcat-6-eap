================================================================================
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
================================================================================

$Revision$ $Date$

                         =================================
                         Apache Tomcat 6.0 Patch Proposals
                         =================================


RELEASE SHOWSTOPPERS:


PATCHES ACCEPTED TO BACKPORT:
  [ start all new proposals below, under PATCHES PROPOSED. ]

PATCHES PROPOSED TO BACKPORT:
  [ New proposals should be added at the end of the list ]

*  Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=36155
   Port the fix from the JK Connector to the AJP and APR Connectors
   http://svn.apache.org/viewvc?rev=672454&view=rev
   +1: billbarker
   -1: remm: No, this gets called all the time, and we're trying to fix a small issue. The real
             solution would be to recycle the fields since as mentioned here it is the cause of 
             the problem (the "local" fields will often never change, but there's no real 
             guarantee overall - it mostly breaks down if there are multiple connectors, with AJP,
             and seems impossible to anticipate):
             https://issues.apache.org/bugzilla/show_bug.cgi?id=36155#c17

* Fix comet behavior
  Invoke READ when there is a body and make sure END is called if CometEvent.close is called during an invokation
  http://svn.apache.org/viewvc?rev=677473&view=rev
  +1: fhanik, funkman
   0: remm: no idea if it's better or worse (the fact that it's been closed is visible)
  -1: 

* Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45459
  Include possible cause in error message since excpetion isn't that clear
  http://svn.apache.org/viewvc?rev=680710&view=rev
  +1: markt
  -0: funkman ( Agree with Remy - just not as strongly (There is enough in the stacktrace that your fav search
       engine can tell you what is wrong fairly quickly)
  -1: remm (this error seems to be displayed by Class.newInstance() which should be ok to use; I am
            not ok with the idea of working around every error message from JDKs)

* Fix issue where the first request for a deleted JSPs returns as if the JSP
  still exists.
  http://svn.apache.org/viewvc?view=rev&revision=683969
  +1: markt
   0: remm (looks risky, very minor problem)
  -1: 

* Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45608
  Prevent race condition for allocate/deallocate in StandardWrapper
  http://svn.apache.org/viewvc?rev=685177&view=rev
  +1: markt
   0: remm: The only unsafe usage of this field is to implement the gimmick loop-wait hack,
            which to me means adding any sort of sync is not worth it.
  -1: 

* Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45074
  http://svn.apache.org/viewvc?rev=689402&view=rev
  +1: jfclere
   0: markt: The OP was using linux so I assume they saw some benefit.
             If this is goign to be applied, the docs should be
             updated as well.
  -0: remm: configuring this is useless (esp on Windows, only the default behavior gives acceptable performance)
  -1: 

* Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45691
  http://svn.apache.org/viewvc?rev=690693&view=rev
  NB: Methods deleted in JspUtil to be deprecated rather than deleted
  +1: markt, remm
  -1:

* Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45618
  Make sure selector is closed.
  Unlikely to be an issue for most (all?) circumstances but technically
  needs fixing,
  http://svn.apache.org/viewvc?rev=691392&view=rev
  +1: markt, rjung
  -1: 

* ETag improvement: https://issues.apache.org/bugzilla/show_bug.cgi?id=45735
  +1: remm, markt, rjung
  -1: 
  rjung: I assume you are going to add it to trunk as well. Backport also applies to 5.5 and 4.1.

* Handle session suffix rewrite at JvmRouteBinderValve with parallel requests from same client
  http://svn.apache.org/viewvc?rev=693378&view=rev
  +1: pero
  -1: 

* Fix log a warning if we create maxThreads
  http://svn.apache.org/viewvc?rev=694951&view=rev
  +1: markt
   0: remm (other endpoints have the same logic but no patch, and logging could pile up quickly)
      markt Because thread count only grows there will only ever be one log message
  -1: 

* Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=44382
  Use HttpOnly for session cookies. This is enabled by default. Feel free to
  caveat your vote with a preference for disabled by default.
  http://svn.apache.org/viewvc?rev=694992&view=rev
  +1: mark (prefer enabled, happy with disabled), rjung
   0: remm (not so elegant, not sure about default value)
      markt It can be improved once the API is fixed in the 3.0 spec
  -1: 
  rjung: slightly prefer enabled for 6.0.x because of increased security by default,
         but disabled for tc5.5.x because of the small risk of breaking existing apps.

* Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45451
  Don't unescape tag attribute values with EL twice
  Also fix numerous \${...} issues
  http://svn.apache.org/viewvc?rev=696061&view=rev
  Note: Methods deleted in the above patch will be deprecated rather than
        deleted when ported to 6.0.x
  +1: markt, remm (ok, I suppose it should work well enough then)
   0: 
      markt: No change in the TCK results with this patch. We have the
             same EL related failures we have without the patch. I'll
             look into them as separate issues.
  -1: 

* Allow asynchronous close() and setTimeout() on CometEvents
  http://svn.apache.org/viewvc?view=rev&revision=645175
  +1: fhanik
   0: remm (maybe, don't know ...), pero ( Is close and timeout also working with APR? remm: APR does not do per connection timeout)
  -1: 

* More EL fixes. Add lookaheads to prevent parsing ambiguity
  http://svn.apache.org/viewvc?rev=696780&view=rev (the change)
  http://svn.apache.org/viewvc?rev=696782&view=rev (the auto generated code)
  +1: mark, remm
  -1: 

* Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45026
  Never use empty reason phrase.
  http://svn.apache.org/viewvc?rev=697183&view=rev
  +1: rjung, mturk, markt
  -1: remm (I think HttpMessages.getMessage should return something rather than null, 
            most likely something like sc.ZZZ like you are doing, otherwise you need to fix
            the two other AJP implementations as well; 
            if I understand correctly, trouble will occur with AJP if status is something 467,
            with no message set)

* Allow huge request body packets for AJP13.
  This was already applied to connectors, but never
  carried forward to trunk and tc6.0.x.
  http://svn.apache.org/viewvc?rev=697192&view=rev
  Original change: http://svn.apache.org/viewvc?rev=486217&view=rev
  +1: rjung, mturk, markt, pero
   0: remm (also partially applies to the two other AJP connectors)

* Add CombinedRealm and LockOutRealm with docs
  http://people.apache.org/~markt/patches/2008-09-24-lockout-realm.patch
  +1: markt, remm (but you should stop adding features at some point)
  -1: 

* Update tc-native to lastest version:
  http://people.apache.org/~jfclere/patches/patch.new-tcnative
  +1: jclere, markt, remm
  -1:

* Partial fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=45878
  Add proper manifests (regression from 5.5.x) and LICENSE & NOTICE files
  Lots of ways to do this. Alternative/better suggestions welcome
  http://svn.apache.org/viewvc?rev=699128&view=rev
  +1: markt
  -1: 

* Make the size limit on objects placed in the static resource cache configurable
  http://svn.apache.org/viewvc?rev=699287&view=rev
  +1: markt, remm
  -1: 

* Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45851
  Fix NPE and outof order message processing issues
  http://svn.apache.org/viewvc?rev=699427&view=rev
  +1: markt
  -1: 

* Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=45285
  Check super class for preDestroy and postContruct
  http://people.apache.org/~markt/patches/2008-09-26-bug45285.patch
  +1: markt, remm
  -1:

* Fix serialisation issue reported by Find Bugs
  http://svn.apache.org/viewvc?rev=699633&view=rev
  +1: markt
   0: remm (StdContext was marked as Serializable for an experiment; obviously it won't work)
  -1:

* Fix small memory leak found by Find Bugs
  http://svn.apache.org/viewvc?rev=699634&view=rev
  +1: markt
  -1: 

* Fix HTML decoding bug found by Find Bugs
  http://svn.apache.org/viewvc?rev=699635&view=rev
  +1: markt, remm
  -1: 

* Fix ASCII parsing bug found by Find Bugs
  http://svn.apache.org/viewvc?rev=699644&view=rev
  +1: markt, remm
  -1: 

* Fix casting bug found by Find Bugs
  http://svn.apache.org/viewvc?rev=699645&view=rev
  +1: markt, remm
  -1: 

* Fix String comparision bugs found by Find Bugs
  http://svn.apache.org/viewvc?rev=699646&view=rev
  +1: markt
  -0: remm (actually, the optimization would be to return the original String
            if it was not modified, and avoid doing things with a StringBuffer)

* Fix SSI date format sync issue reported by Find Bugs
  http://svn.apache.org/viewvc?rev=699714&view=rev
  +1: markt
  -1: 
